<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0">

  <title>Jan Drewniak | Swarmy</title>
  <meta name="description" content="UX Design and Developement">
  <meta name="keywords" content="jan drewniak design user interface ui ux deveopement">

  <link rel="stylesheet" href="../../assets/css/all.min.css" />  
</head>
<body class="swarmy">
	
<nav class="site-nav"> 
  <a href="../../index.html#home"> home</a> 
  <a href="../../index.html#portfolio">work</a>
  <a href="../../index.html#lab">lab</a>
  <a href="../../blog/index.html">blog</a>
</nav> 
    
    
<a class='prevnext-nav prev active-static' href='../scribbly-ladybugs/index.html'>&lt;</a>

<a class='prevnext-nav next active-static' href='../css-toggling/index.html'>&gt;</a>

    
<canvas id="swarmy-canvas">	
</canvas>

<script type="text/javascript" charset="utf-8" async defer>

var canvas = document.getElementById('swarmy-canvas');
	canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

var ctx = canvas.getContext('2d');
	ctx.font = 'normal 12pt Calibri';
	ctx.fillStyle="rgba(0,0,0, 0.3)";
	ctx.strokeStyle="rgba(0,0,0, 0.8)";


var NEIGHBOURHOOD = 10

var BOIDHEIGHT = 5

var BOIDWIDTH = 5

var DEFAULTX = 100

var DEFAULTY = 100

var DEFAULT_DIRECTION = 100

var DEFAULT_VELOCITY = 3

var BOID_COUNT = 500

var BOID_RADIUS = 10

var NEIGHBOURHOOD = BOID_RADIUS * 10

var Rect = { 
	x: DEFAULTX, 
	y: DEFAULTY, 
	height:BOIDHEIGHT,
	width:BOIDWIDTH,
	velocity: DEFAULT_VELOCITY,
	directionInDegrees: DEFAULT_DIRECTION,
	backgroundColor: '#'+Math.floor(Math.random()*16777215).toString(16), 

	nextX: function(){
		return this.velocity * Math.cos(this.directionInDegrees)
	},
	nextY: function(){
		return this.velocity * Math.sin(this.directionInDegrees)
	},

	distanceToRect: function(otherRect){
		var a = Math.abs(this.x - otherRect.x)
		var b = Math.abs(this.y - otherRect.y)
		var cSqr = (a*a)+(b*b)
		var c = Math.sqrt(cSqr)
		return c
	} 

} 

Object.make = function(prototype, properties){
	var o = Object.create(prototype)
	for (var prop in properties){
		o[prop] = properties[prop]
	}
	return o
}

function randomBetween(min, max) {
    if (min < 0) {
        return parseInt( min + Math.random() * (Math.abs(min)+max) );
    }else {
        return parseInt( min + Math.random() * max );
    }
}

var rects = []
for (var i=0; i<BOID_COUNT; i++){
	rects.push(
		Object.make(Rect, { 
					x: randomBetween(10, canvas.width), 
				 	y: randomBetween(10, canvas.height), 
					velocity:randomBetween(DEFAULT_VELOCITY-(DEFAULT_VELOCITY/2), DEFAULT_VELOCITY+(DEFAULT_VELOCITY/2)),  
					directionInDegrees:randomBetween(0, 2),
					backgroundColor: "rgba("+randomBetween(0, 255)+","+randomBetween(0, 255)+","+randomBetween(0, 255)+",0.3)"
				})
		)
}

function doStuff(){
	ctx.clearRect(0, 0, canvas.width, canvas.height)

	var j = BOID_COUNT
	
	while (j--){

	var rect = rects[j]


	ctx.beginPath();
    ctx.arc(rect.x,rect.y,BOID_RADIUS,0,Math.PI*2,true);

   	ctx.fillStyle = rect.backgroundColor
    
    ctx.fill();
    ctx.stroke();

	rect.x += rect.nextX() ;
	rect.y += rect.nextY() ;


 	var neighbours = []

	var averageDirection = 0

 	var i = BOID_COUNT;
    
    var hasNeighbours = false; 

    var neighbourLength = 0;

    while (i--){
    	var otherBoid = rects[i]

    	if ( otherBoid == rect ) continue;
    	
		var boidIsNeighbour = rect.distanceToRect(otherBoid) < NEIGHBOURHOOD    	    				
		
		if ( !boidIsNeighbour ){
			continue
		} else {
			neighbours.push(rects[i])
			averageDirection +=otherBoid.directionInDegrees + Math.sin(i*j*2)
			hasNeighbours = true
			neighbourLength += 1
		}
    	
    }

    
    if ( hasNeighbours ){
	    rect.directionInDegrees = averageDirection/neighbourLength
	}

	if (rect.x > canvas.width ) {
		rect.x = 0;
	}

	if (rect.y > canvas.height) {
		rect.y = 0;
	}
	if (rect.x < 0 ) {
		rect.x = canvas.width;
	}

	if (rect.y < 0) {
		rect.y = canvas.height;
	}
	}//while
	

	window.requestAnimationFrame(doStuff)
}

doStuff()

</script>
  <footer class="site-footer cf" role="contentinfo">
  
  <svg class="svg-angle" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" preserveAspectRatio="none">
  	<polygon points="0,50 50,50 0,0" fill="inherit" />
  </svg>

    <a class="icon--social twitter" target="_BLANK" href="https://twitter.com/j4n_co">
      twitter
    </a>
    <a class="icon--social linkedin" target="_BLANK" href="http://ca.linkedin.com/in/jandrewniak">
        linkedin
    </a>
    <a class="icon--social codepen" target="_BLANK" href="http://codepen.io/j4n">
        codepen
    </a>

  <script type="text/javascript" language="javascript">
  <!-- // Generated by http://rumkin.com/tools/mailto_encoder
  ML="wadb:rl<"+"\"c=eo@sm-pfuh jgk>in.t/";
  MI="71E961>>:83CMM<"+"K@@6<"+"KGE9<"+"KM;KM@051AA;5@@K155<"+"08ED5;B:8?1J6M<"+"4F1KL25;0KJ1H=G?1J6L9<"+"?8IEG;MEJKEM<"+"C9DE7N1IE";
  OT="";
  for(j=0;j<MI.length;j++){
  OT+=ML.charAt(MI.charCodeAt(j)-48);
  }document.write(OT);
  // --></script>
  
  <nav class="footer-nav">
    <a href="../../index.html">home</a>
    <a href="../../portfolio/index.html">work</a>
    <a href="../index.html">lab</a>
    <a href="../../blog/index.html">blog</a>
  </nav>

	<small class="text-center">
		Â© Jan Drewniak 2015  &middot;  Built with <a href="http://getkirby.com">Kirby CMS</a>  &middot;  Hosted on <a href="https://www.webfaction.com/?aid=21613">Webfaction</a>  &middot;  Set in Avenir & Glypha
	</small>


  </footer>

  <script src="../../assets/js/all.min.js"></script>  
  
  

</body>

</html>
<!-- Localized -->